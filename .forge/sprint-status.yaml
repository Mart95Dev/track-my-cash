sprint:
  id: sprint-compatibilite-ia-analyse
  goal: "Compatibilité bancaire élargie (BNP/SG/CE/N26/Wise), parser CSV générique, enrichissement IA (objectifs+budgets+anomalies), comparaisons MoM, détection récurrents, bilan annuel IA"
  start_date: "2026-02-22"
  end_date: "2026-02-22"
  status: in_progress

stories:
  # === SPRINT COMPATIBILITÉ, IA & ANALYSE AVANCÉE (v6) ===

  - id: STORY-039
    title: "Parsers BNP Paribas, Société Générale, Caisse d'Épargne"
    epic: parsers
    complexity: M
    priority: P1
    status: completed
    blockedBy: []
    points: 3
    tests: 16
    notes: "BNP (5 tests), SG (5 tests), CE (6 tests) — satisfies BankParser, parse(_buffer) ajouté"

  - id: STORY-040
    title: "Parser CSV générique avec mapping colonnes (catch-all)"
    epic: parsers
    complexity: M
    priority: P1
    status: completed
    blockedBy: []
    points: 3
    tests: 6
    notes: "genericCsvParser (canHandle, detectHeaders, parseWithMapping) + CsvMappingDialog + importWithMappingAction + mapping sauvegardé en DB — QA: 15 tests (6 Dev + 9 QA gaps couverts)"

  - id: STORY-041
    title: "Comparaisons Mois/Mois (MoM) dans le Dashboard"
    epic: analytics
    complexity: S
    priority: P1
    status: completed
    blockedBy: []
    points: 2
    tests: 5
    notes: "computeMoMVariation (5 tests) + VariationBadge composant + intégration dashboard"

  - id: STORY-042
    title: "Détection automatique des paiements récurrents"
    epic: automatisation
    complexity: M
    priority: P2
    status: completed
    blockedBy: []
    points: 3
    tests: 6
    notes: "detectRecurringPatterns (6 tests) + RecurringSuggestions UI + server actions"

  - id: STORY-043
    title: "Parsers N26 + Wise (marché EU)"
    epic: parsers
    complexity: S
    priority: P2
    status: completed
    blockedBy: []
    points: 2
    tests: 8
    notes: "N26 (4 tests), Wise (4 tests) — devise multi-currency, montants avec espace"

  - id: STORY-044
    title: "Enrichissement contexte conseiller IA (objectifs + budgets)"
    epic: intelligence
    complexity: S
    priority: P1
    status: completed
    blockedBy: []
    points: 2
    tests: 5
    notes: "buildFinancialContext enrichi goals+budgets, SYSTEM_PROMPT amélioré"

  - id: STORY-045
    title: "Détection d'anomalies financières (push automatique post-import)"
    epic: intelligence
    complexity: M
    priority: P2
    status: completed
    blockedBy: []
    points: 3
    tests: 6
    notes: "detectAnomalies (6 tests) + anomaly-service fire-and-forget dans confirmImportAction"

  - id: STORY-046
    title: "Bilan annuel IA + export PDF (Pro/Premium)"
    epic: intelligence
    complexity: M
    priority: P3
    status: completed
    blockedBy: []
    points: 4
    tests: 6
    notes: "computeAnnualReport (6 tests) + annual-report-actions + AnnualReportButton"

metrics:
  total: 8
  completed: 8
  in_progress: 0
  pending: 0
  total_points: 22
  points_completed: 22
  tests_total: 325
  tests_sprint: 67
  qa_verdict: PASS

previous_sprint:
  id: sprint-objectifs-intelligence
  stories: 6
  completed: 6
  qa_verdict: PASS
  tests: 258
  commit: "dc214d6"
